<!doctype html>
<html lang="zh-Hans">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>数字解说 — 改良正负分离版</title>
<style>
:root{--bg:#f6f8fb;--card:#fff;--muted:#64748b;--accent:#2563eb;--good:#10b981;--bad:#ef4444}
*{box-sizing:border-box}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans SC","PingFang SC","Microsoft Yahei",Arial;background:var(--bg);color:#0f172a}
.container{max-width:920px;margin:14px auto;padding:12px}
.header{display:flex;align-items:flex-start;gap:12px}
h1{font-size:18px;margin:0}
.sub{color:var(--muted);font-size:13px;margin-top:6px}
.card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(14,24,40,0.06);margin-top:12px}
.controls{display:flex;gap:8px;flex-wrap:wrap}
.search{flex:1;padding:10px 12px;border-radius:10px;border:1px solid #e6eefb;font-size:15px;min-width:140px}
.btn{padding:10px 12px;border-radius:10px;border:0;background:var(--accent);color:#fff;font-weight:600}
.btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(37,99,235,0.12)}
.notice{color:var(--muted);font-size:13px;margin-top:8px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:12px;margin-top:12px}
.item{background:linear-gradient(180deg,#fff,#fbfdff);border-radius:12px;padding:12px;border:1px solid rgba(14,36,70,0.04);box-shadow:0 6px 18px rgba(14,36,70,0.03)}
.row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.id{font-weight:700;background:rgba(37,99,235,0.06);padding:6px 10px;border-radius:10px}
.title{font-weight:700;margin-top:8px}
.split{display:flex;gap:8px;margin-top:10px}
.col{flex:1;padding:10px;border-radius:10px;background:rgba(15,23,42,0.03);min-height:80px;position:relative}
.col h4{margin:0 0 6px 0;font-size:13px}
.pos{border-left:4px solid var(--good);padding-left:10px}
.neg{border-left:4px solid var(--bad);padding-left:10px}
.copyBtn{position:absolute;right:10px;top:10px;padding:6px 8px;border-radius:8px;background:transparent;border:1px solid rgba(0,0,0,0.06);font-size:13px;color:var(--muted)}
.contentFull{margin-top:10px;color:#0f172a;white-space:pre-wrap;font-size:13px}
.detailsToggle{margin-top:8px;font-size:13px;color:var(--muted);cursor:pointer}
.empty{padding:28px;text-align:center;color:var(--muted)}
footer{margin-top:18px;text-align:center;color:#94a3b8;font-size:13px}
@media(max-width:460px){.grid{grid-template-columns:1fr}.split{flex-direction:column}}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1>数字解说 — 改良正负分离版</h1>
        <div class="sub">输入数字或关键词（如：112、贵人、财富）。页面会尽量把“正：”与“负：”内容分开呈现。</div>
      </div>
    </div>

    <div class="card">
      <div class="controls">
        <input id="q" class="search" type="search" placeholder="输入数字或关键词（示例：112 / 贵人 / 桃花）" />
        <button id="searchBtn" class="btn">🔍 搜索</button>
        <button id="showAll" class="btn ghost">显示全部</button>
      </div>
      <div class="notice">说明：系统会先尝试按“正：/负：”标识切分；若没有标识则尝试按行或常见关键词拆分。</div>

      <div id="resultGrid" class="grid" style="margin-top:12px"></div>
      <div id="empty" class="empty">请输入数字或关键词，然后点「搜索」。</div>
    </div>

    <footer>© Julie • 数据由你提供 · 页面由 ChatGPT 优化</footer>
  </div>

<script>
/* ====== 请确保 items 数组包含你完整的 81 组解释 ======
   如果仓库已有完整 items，你可以保持不变；否则把完整 81 组文本填进下方数组 */
const items = [
  {"id":"112","title":"数字 112 的解说","content":"正：自己非常自信的沟通，适合做中介。（大到可以做国家与国家的联系那就是外交官，小到可以做到个人与个人的联系就是中介）\n负：自己已经厉害到能和自己沟通，那还需不需要另一半了？婚姻会有短暂或永久性的分离。有四种情况，有名无实、两地分居、生离、死别。\n所以，有112的家人一定要学会借力才能改变。\n独立能力强，做事却又常常半途而废；过于自信的言谈在与人交往时，容易受到小人陷害；经过较长时间磨练或多读书，会少走弯路。晚婚比较理想。\n做事矛盾，纠结，容易半途而废，虎头蛇尾，说一套做一套，多读书，多突破自我。"},
  {"id":"123","title":"数字 123 的解说","content":"正：自己既会说又会表达，是个出色的演说家。\n负：既有犹豫不决的行动，所以有123的人做事开头很好，但是很容易反复，结果就会出现虎头蛇尾。\n有主见，有明确的目标；说话很直接并有权威感，为人坦率真诚；切忌祸从口出；如果能很好地管理和发挥在口才方面的特长，或许能成为出色的演说家，适合当演员。"},
  {"id":"134","title":"数字 134 的解说","content":"正：自己既会表达又会总结，所以记忆力好。\n负：自己事情做完了再去想，所以容易感到委屈而抱怨，进而多愁善感。\n富有创意，有明确的目标，有点特立独行；内心相当脆弱，依赖性较强，凡事希望稳定、牢靠，却又想尝试新事物；切忌不要盲目的忙碌，要稳中求胜。"},
  {"id":"145","title":"数字 145 的解说","content":"正：自己经过分析思考后确定的目标，坚持不懈，容易实现。\n负：自己想出来的方向，不易实现，容易事与愿违，越想要反而越得不到。"},
  {"id":"156","title":"数字 156 的解说","content":"正：自己有五方财，需要走出去求财。\n负：如果走不出去容易有不良嗜好，就是五个方面花钱。"},
  {"id":"167","title":"数字 167 的解说","content":"正：自己用智慧把人吸引过来，就会帮助你白手起家。\n负：自己用钱吸引来的人，就会吃穷败光你，让你重头再来。"},
  {"id":"178","title":"数字 178 的解说","content":"正：自己去帮助别人拿到权利。\n负：自己会给别人带来压力，容易背黑锅。"},
  {"id":"189","title":"数字 189 的解说","content":"正：自己承担起责任就能拿到成果。\n负：自己顶着压力要结果，不轻信别人，所以事事亲力亲为，由于压力过大，容易的心脑血管病。"},
  {"id":"191","title":"数字 191 的解说","content":"正：自己拿到成果成就自己。\n负：自己拿到结果还是剩自己，影响婚姻。"},
  /* ... 其余条目请完整加入（为了示例这里仅示出部分） ... */
  {"id":"999","title":"数字 999 的解说","content":"正：机会很多，很容易有资产。\n负：机会多，如果做事不专一，会失去很多很良好的生意机会，要么很好，要么很不好。"}
];

/* ====== 正负提取（更鲁棒） ====== */
function splitPosNeg(text){
  if(!text || !text.trim()) return {pos:'—',neg:'—',full:text||''};
  // 标准化冒号（： / :）并确保换行一致
  const norm = text.replace(/\r/g,'').replace(/：/g,':');
  // 先尝试用正则精确捕获“正:...（到负:或结束）” 和 “负:...（到正:或结束）”
  const posRegex = /正[:]\s*([\s\S]*?)(?=(?:负[:])|$)/i;
  const negRegex = /负[:]\s*([\s\S]*?)(?=(?:正[:])|$)/i;
  const posMatch = norm.match(posRegex);
  const negMatch = norm.match(negRegex);
  let pos = '', neg = '';
  if(posMatch) pos = posMatch[1].trim();
  if(negMatch) neg = negMatch[1].trim();

  // 如果任一为空，尝试按行启发式分割
  if(!pos && !neg){
    // 按行查找首个含“正”或“负”的行索引
    const lines = norm.split('\\n').map(l=>l.trim()).filter(l=>l.length);
    // 收集以“正”或“负”开头的块
    let collecting = null;
    for(const line of lines){
      if(/^正[:]/i.test(line)){ collecting='pos'; pos += line.replace(/^正[:]\s*/i,'') + '\\n'; continue; }
      if(/^负[:]/i.test(line)){ collecting='neg'; neg += line.replace(/^负[:]\s*/i,'') + '\\n'; continue; }
      // 若尚未看到正/负，尝试使用常见提示词判断（如开头为“正面”或“负面”）
      if(/^正面|^正\\b/i.test(line)){ collecting='pos'; pos += line.replace(/^正面[:：]?\\s*/i,'') + '\\n'; continue; }
      if(/^负面|^负\\b/i.test(line)){ collecting='neg'; neg += line.replace(/^负面[:：]?\\s*/i,'') + '\\n'; continue; }
      // 否则把尚在收集的内容加入相应块；如果都还没开始，就放到 pos 作为默认说明
      if(collecting==='pos'){ pos += line + '\\n'; }
      else if(collecting==='neg'){ neg += line + '\\n'; }
      else { pos += line + '\\n'; }
    }
    pos = pos.trim();
    neg = neg.trim();
  }

  // 最后兜底：如果 still empty，则把全文放在 pos（方便显示）
  if(!pos) pos = '—';
  if(!neg) neg = '—';
  return {pos:normalizeNewlines(pos), neg:normalizeNewlines(neg), full:text};
}
function normalizeNewlines(s){ return String(s).replace(/\\n{2,}/g,'\\n\\n').trim(); }

/* ====== 渲染卡片 ====== */
const grid = document.getElementById('resultGrid');
const emptyBox = document.getElementById('empty');

function createCard(item){
  const d = document.createElement('div'); d.className='item';
  const header = document.createElement('div'); header.className='row';
  const id = document.createElement('div'); id.className='id'; id.textContent = item.id;
  header.appendChild(id);
  d.appendChild(header);
  const title = document.createElement('div'); title.className='title'; title.textContent = item.title;
  d.appendChild(title);

  const split = splitPosNeg(item.content||'');
  const splitWrap = document.createElement('div'); splitWrap.className='split';

  const left = document.createElement('div'); left.className='col pos';
  const lhead = document.createElement('h4'); lhead.textContent='正面'; left.appendChild(lhead);
  const lcopy = document.createElement('button'); lcopy.className='copyBtn'; lcopy.textContent='复制正面';
  lcopy.onclick = ()=>{ navigator.clipboard?.writeText(split.pos).then(()=>{ lcopy.textContent='已复制'; setTimeout(()=>lcopy.textContent='复制正面',1000); }); };
  left.appendChild(lcopy);
  const lcont = document.createElement('div'); lcont.style.marginTop='6px'; lcont.style.whiteSpace='pre-wrap'; lcont.textContent = split.pos; left.appendChild(lcont);

  const right = document.createElement('div'); right.className='col neg';
  const rhead = document.createElement('h4'); rhead.textContent='负面'; right.appendChild(rhead);
  const rcopy = document.createElement('button'); rcopy.className='copyBtn'; rcopy.textContent='复制负面';
  rcopy.onclick = ()=>{ navigator.clipboard?.writeText(split.neg).then(()=>{ rcopy.textContent='已复制'; setTimeout(()=>rcopy.textContent='复制负面',1000); }); };
  right.appendChild(rcopy);
  const rcont = document.createElement('div'); rcont.style.marginTop='6px'; rcont.style.whiteSpace='pre-wrap'; rcont.textContent = split.neg; right.appendChild(rcont);

  splitWrap.appendChild(left); splitWrap.appendChild(right);
  d.appendChild(splitWrap);

  // 展开全文
  const details = document.createElement('div');
  details.className='detailsToggle';
  details.textContent = '查看全文 / 展开更多';
  details.onclick = ()=>{ 
    if(details.nextSibling && details.nextSibling.style.display==='block'){ details.nextSibling.style.display='none'; details.textContent='查看全文 / 展开更多'; }
    else { details.nextSibling.style.display='block'; details.textContent='收起全文'; }
  };
  d.appendChild(details);

  const full = document.createElement('div'); full.className='contentFull'; full.style.display='none';
  full.textContent = split.full || '';
  d.appendChild(full);

  return d;
}

function render(list){
  grid.innerHTML='';
  if(!list || list.length===0){ grid.style.display='none'; emptyBox.style.display='block'; return; }
  emptyBox.style.display='none'; grid.style.display='grid';
  list.forEach(it=> grid.appendChild(createCard(it)));
}

/* ====== 搜索 ====== */
function search(q){
  q = (q||'').trim();
  if(!q){ render([]); return; }
  // 精确匹配 id
  const exact = items.filter(i => i.id === q);
  if(exact.length){ render(exact); return; }
  const low = q.toLowerCase();
  // 模糊匹配 title 或 content
  const fuzzy = items.filter(i => (i.title + ' ' + (i.content||'')).toLowerCase().includes(low));
  render(fuzzy);
}

/* 事件绑定 */
document.getElementById('searchBtn').addEventListener('click', ()=>search(document.getElementById('q').value));
document.getElementById('q').addEventListener('keydown', e=>{ if(e.key === 'Enter') search(e.target.value); });
document.getElementById('showAll').addEventListener('click', ()=>render(items));

/* 初始空白 */
render([]);
</script>
</body>
</html>
